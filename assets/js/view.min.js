$(document).ready(function(){function e(e,o){t.SwfFile=n+o,new FlexPaperViewer(a,e,{config:t})}var t={FitPageOnLoad:!0,FitWidthOnLoad:!0,InitViewMode:"Portrait"},o=$(".more-page a"),a=o.attr("page-swf"),n=o.attr("page-data"),r=o.attr("page-num"),l=o.attr("page-width"),g=o.attr("page-height"),h=1;$(".page").each(function(){e($(this).attr("id"),h++)}),$(".more-page a").click(function(){for(i=0;i<3;i++){var e=document.createElement("div");if(e.className="page",e.id="page_"+h,e.page=h,e.style.width=l+"px",e.style.height=g+"px",$(".more-page").before(e),$(".more-page .page-left").html(r-h),++h>r){$(".more-page").remove();break}}$(window).scroll()}),$(window).scroll(function(){$(".page").each(function(){var t=$(this).offset().top;console.log("a: "+t),console.log("s: "+$(window).scrollTop()),console.log("h: "+$(window).height()),(t<=$(window).height()||t-$(window).scrollTop()<$(window).height())&&($(window).scrollTop()<=t||$(window).scrollTop()<t+$(this).height()+2)?(e($(this).attr("id"),$(this).attr("page")),console.log($(this).attr("id")+"在可视范围")):($(this).children().remove(),console.log($(this).attr("id")+"不在可视范围"))})})});